{% extends 'base.html' %}
{% block body %}

<div id="ddashboard">
  <div id="dlogout">
  <ul>
    <li><a href="{{ url_for('exit') }}">
      <img src='{{ url_for('static', filename='wlogout.png')}}' alt="logout"></a></li>
    <li><a href="{{ url_for('exit') }}">Logout</a></li>
  </ul>

  </div>

  <nav role="navigations">
  <div class="cmenu">
    <ul>
      <li> <a href="#">Data Siswa</a><br>
        <div class="csubmenu">
            <span><a href="{{ url_for('inputdatasiswa') }}">Input Data Siswa</a></span><br>
            <span><a href="{{ url_for('caridatasiswa') }}">Cari Data</a></span> <br>
             <span><a href="{{ url_for('inputkelas') }}">Input Kelas</a></span><br>
            <span><a href="{{ url_for('statistiksiswa') }}">Statistik Siswa </a> </span>
        </div>

      </li>
      <li><a href="#">Data Presensi</a></li>
      <li> <a href="#">Data User</a> </li>
      <li><a href="#">Setting Presensi</a></li>
    </ul>
  </div>

  </nav>


  <div id="dlist" >
<div class="tab">
<button type="button" name="button" class="tablinks" onclick="tabsiswa(event,'frminputsiswa')">Input Siswa</button>
<button type="button" name="button" class="tablinks" onclick="tabsiswa(event,'updatesiswa')">Update Siswa</button>
</div>

<div id="frminputsiswa" class="tabcontent">

  <form class="" action="index.html" method="post">
    <label for="nis">Nis</label>
    <input id="nis" type="text" name="user_n"  placeholder="Nis" required>
    <label for="nama">Nama</label>
    <input id="nama" type="text" name="nama"  placeholder="Nama" required>
    <!-- <fieldset>
      <legend>Pilih Jenis Kelamin</legend>
      <input type="radio" required name="title" id="r1" value="L"><label for="r1">Laki-laki</label>
      <input type="radio" required name="title" id="r2" value="P"><label for="r2">Perempuan</label>
    </fieldset> -->
    <label for="jenis_kelamin">Jenis Kelamin</label>
    <select id="jenis_kelamin" name="jenis_kelamin" required>
     <option value=""></option>
    <option value="L">Laki-laki</option>
    <option value="P">Perempuan</option>
    </select>
    <label for="alamat">Alamat</label>
    <input id="alamat" type="text" name="alamat"  placeholder="Alamat" required>
    <!-- <textarea id="alamat" name="alamat" rows="4" cols="50" required>
  </textarea> -->
  <label for="tgl_lahir">Tgl Lahir</label>
  <input id="tgl_lahir" type="date" name="tgl_lahir"  placeholder="Tgl Lahir" required>

    <label  for="kelas">Kelas</label>
    <select id="kelas" name="kelas" required>
     <option value=""></option>
    {% for rowkelas in rowskelas %}

    <option value={{ rowkelas[0]}}>{{ rowkelas[1]}}</option>

   {% endfor %}
   </select>

    <label for="tahun_masuk">Tahun Masuk</label>
    <!-- <input id="tahun_masuk" type="date" name="tahun_masuk"  placeholder="Tahun Masuk" required> -->
    <select id="tahun_masuk" name="tahun_masuk">
     <option value=""></option>
    </select>

     <label for="nisn">Nisn</label>
    <input id="nisn" type="text" name="nisn"  placeholder="Nisn" >
    <label for="status">Status</label>
   <select id="status" name="status">
    <option value=""></option>
    {% for rowstatus in rowsstatus %}

    <option value={{ rowstatus[0]}}>{{ rowstatus[1]}}</option>

   {% endfor %}
  </select>


  </form>
  <div id="dfotosiswa">
    <form enctype="multipart/form-data" method="post" action="{{ url_for('upload_file') }}">
  <div class="row">
    <label for="fileToUpload">Select Files to Upload</label><br />
    <input type="file" name="file" id="filesToUpload" multiple="multiple" />
    <output id="filesInfo"></output>
  </div>
  <div class="row">
    <input type="submit" value="Upload" />
  </div>
  </form>
  <!-- <form  action="{{url_for('upload_file')}}" method=post enctype=multipart/form-data>
      <p><input type=file name=file>
         <input type=submit value=Upload>
    </form> -->
  </div>

</div>

<div id="updatesiswa" class="tabcontent">
  <table>

  <tr>
    <th>Nis</th>
    <th>Nama</th>
  </tr>
      {% for row in rows %}

        <tr>
          <td>{{ row[0]}}</td>
          <td>{{ row[1] }}</td>

        </tr>
      {% endfor %}
  </table>
</div>


  </div>

</div>

<script type="text/javascript">
function fileSelect(evt) {
    if (window.File && window.FileReader && window.FileList && window.Blob) {
        var files = evt.target.files;

        var result = '';
        var file;
        for (var i = 0; file = files[i]; i++) {
            // if the file is not an image, continue
            if (!file.type.match('image.*')) {
                continue;
            }

            reader = new FileReader();
            reader.onload = (function (tFile) {
                return function (evt) {
                    // var div = document.createElement('div');
                    // div.innerHTML = '<img style="width: 90px;" src="' + evt.target.result + '" />';
                    var img='<img style="width: 90px;" src="' + evt.target.result + '" />';
                    // document.getElementById('filesInfo').appendChild(div);
                    document.getElementById('filesInfo').innerHTML=img;
                };
            }(file));
            reader.readAsDataURL(file);
        }
    } else {
        alert('The File APIs are not fully supported in this browser.');
    }
}




  function tabsiswa(evt,id){

    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(id).style.display = "block";
    evt.currentTarget.className += " active";
  }

  function tabnsiswa(id){
  var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
        // /alert(tablinks[i].className.replace(" active", ""));
    }
    document.getElementById(id).style.display = "block";
    tablinks[0].className += " active";
  }

function setTahunmasuk(){
  var thn1=(new Date()).getFullYear();
$('#tahun_masuk').append('<option value='+ thn1 +"selected=selected>"+thn1+'</option>');
  var thn=(new Date()).getFullYear();
  for(var i=0;i<5;i++){
    thn=thn-1;
  $('#tahun_masuk').append('<option value='+ thn +">"+thn+'</option>');
  }

}

  $(document).ready(function () {
   tabnsiswa('frminputsiswa');
   document.getElementById('filesToUpload').addEventListener('change', fileSelect, false);
   setTahunmasuk();
  //  $('#tahun_masuk')
  //              .attr('type', 'text')
  //              .datepicker({
  //                  // Consistent format with the HTML5 picker
  //                  dateFormat: 'yy'
  //              })
  });

</script>


{% endblock %}
<!-- "{{ url_for('static', filename='img/favicon.ico') }}" -->
