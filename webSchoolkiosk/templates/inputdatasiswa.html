{% extends 'base.html' %}
{% block body %}

<div id="ddashboard">
  <div id="dlogout">
  <ul>
    <li><a href="{{ url_for('exit') }}">
      <img src='{{ url_for('static', filename='wlogout.png')}}' alt="logout"></a></li>
    <li><a href="{{ url_for('exit') }}">Logout</a></li>
  </ul>

  </div>

  <nav role="navigations">
  <div class="cmenu">
    <ul>
      <li> <a href="#">Data Siswa</a><br>
        <div class="csubmenu">
            <span><a href="{{ url_for('inputdatasiswa') }}">Input Data Siswa</a></span><br>
            <span><a href="{{ url_for('caridatasiswa') }}">Cari Data</a></span> <br>
             <span><a href="{{ url_for('inputkelas') }}">Input Kelas</a></span><br>
            <span><a href="{{ url_for('statistiksiswa') }}">Statistik Siswa </a> </span>
        </div>

      </li>
      <li><a href="#">Data Presensi</a></li>
      <li> <a href="#">Data User</a> </li>
      <li><a href="#">Setting Presensi</a></li>
    </ul>
  </div>

  </nav>


  <div id="dlist" >

<div class="tab">
<button type="button" name="button" class="tablinks" onclick="tabsiswa(event,'frminputsiswa')">Input Siswa</button>
<button type="button" name="button" class="tablinks" onclick="tabsiswa(event,'updatesiswa')">Update Siswa</button>
</div>

<div id="frminputsiswa" class="tabcontent">
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class=flashes>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  <form enctype="multipart/form-data" method="post" action="{{ url_for('upload_file') }}">
    <label for="nis">Nis</label>
    <input id="nis" type="text" name="nis"  placeholder="Nis" required>
    <label for="nama">Nama</label>
    <input id="nama" type="text" name="nama"  placeholder="Nama" required>

    <label for="jenis_kelamin">Jenis Kelamin</label>
    <select id="jenis_kelamin" name="jenis_kelamin" required>
     <option value=""></option>
    <option value="L">Laki-laki</option>
    <option value="P">Perempuan</option>
    </select>
    <label for="alamat">Alamat</label>
    <input id="alamat" type="text" name="alamat"  placeholder="Alamat" required>

  <label for="tgl_lahir">Tgl Lahir</label>
  <input id="tgl_lahir" type="date" name="tgl_lahir"  placeholder="Tgl Lahir" required>
  <label for="tempat">Tempat Lahir</label>
  <input id="tempat" type="text" name="tempat"  placeholder="Tempat Lahir" required>
  <label for="nohportu">No Hp Orang Tua</label>
  <input id="nohportu" type="text" name="nohportu"  placeholder="No Hp Orang Tua" required>
  <label for="nohpsiswa">No Hp Siswa</label>
  <input id="nohpsiswa" type="text" name="nohpsiswa"  placeholder="No Hp Siswa" >

    <label  for="kelas">Kelas</label>
    <select id="kelas" name="kelas" required>
     <option value=""></option>
    {% for rowkelas in rowskelas %}

    <option value={{ rowkelas[0]}}>{{ rowkelas[1]}}</option>

   {% endfor %}
   </select>

    <label for="tahun_masuk">Tahun Masuk</label>

    <select id="tahun_masuk" name="tahun_masuk">
     <option value=""></option>
    </select>

     <label for="nisn">Nisn</label>
    <input id="nisn" type="text" name="nisn"  placeholder="Nisn" >
    <label for="status">Status</label>
   <select id="status" name="status">
    <option value=""></option>
    {% for rowstatus in rowsstatus %}

    <option value={{ rowstatus[0]}}>{{ rowstatus[1]}}</option>

   {% endfor %}
  </select>


<fieldset>
  <legend>Rekam Kartu</legend>
  <p>
    <input type="radio" id="test1" name="radio-group" checked>
    <label for="test1">Ya</label>
  </p>
  <p>
    <input type="radio" id="test2" name="radio-group">
    <label for="test2">Tidak</label>
  </p>

</fieldset>

<div id="dfotosiswa">
  <!-- <form enctype="multipart/form-data" method="post" action="{{ url_for('upload_file') }}"> -->
    <fieldset>
      <legend>Cari Foto</legend>
      <div class="row">
        <!-- <label for="fileToUpload">Select Files to Upload</label><br /> -->
        <input type="file" name="file" id="filesToUpload" multiple="multiple" onchange="cvt(this)" />
        <output id="filesInfo"></output>
        <input type="hidden" id="imgpth" name="imgpth" value="">
      </div>
      <!-- <div class="row">
        <input type="submit" value="Upload" />
      </div> -->
    </fieldset>

<!-- </form> -->
<!-- <form  action="{{url_for('upload_file')}}" method=post enctype=multipart/form-data>
    <p><input type=file name=file>
       <input type=submit value=Upload>
  </form> -->
</div>

<input type="submit" name="" value="Save"> <input type="reset" name="" value="Batal">
  </form>


</div>

<div id="updatesiswa" class="tabcontent">
  <table>

  <tr>
    <th>Nis</th>
    <th>Nama</th>
  </tr>
      {% for row in rows %}

        <tr>
          <td>{{ row[0]}}</td>
          <td>{{ row[1] }}</td>

        </tr>
      {% endfor %}
  </table>
</div>


  </div>

</div>

<script type="text/javascript">
function fileSelect(evt) {
    if (window.File && window.FileReader && window.FileList && window.Blob) {
        var files = evt.target.files;

        var result = '';
        var file;
        for (var i = 0; file = files[i]; i++) {
            // if the file is not an image, continue
            if (!file.type.match('image.*')) {
                continue;
            }

            reader = new FileReader();
            reader.onload = (function (tFile) {
                return function (evt) {
                    // var div = document.createElement('div');
                    // div.innerHTML = '<img style="width: 90px;" src="' + evt.target.result + '" />';
                    var img='<img style="width: 90px;" src="' + evt.target.result + '" />';
                    // document.getElementById('filesInfo').appendChild(div);
                    document.getElementById('filesInfo').innerHTML=img;
                };
            }(file));
            reader.readAsDataURL(file);
        }
    } else {
        alert('The File APIs are not fully supported in this browser.');
    }
}


function cvt(element) {

 var file = element.files[0];

 var reader = new FileReader();

 reader.onloadend = function() {

   $("#imgpth").val(reader.result);

 }

 reader.readAsDataURL(file);

}

  function tabsiswa(evt,id){

    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(id).style.display = "block";
    evt.currentTarget.className += " active";
  }

  function tabnsiswa(id){
  var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");

    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
        // /alert(tablinks[i].className.replace(" active", ""));
    }
    document.getElementById(id).style.display = "block";
    tablinks[0].className += " active";
  }

function setTahunmasuk(){
  var thn1=(new Date()).getFullYear();
$('#tahun_masuk').append('<option value='+ thn1 +"selected=selected>"+thn1+'</option>');
  var thn=(new Date()).getFullYear();
  for(var i=0;i<5;i++){
    thn=thn-1;
  $('#tahun_masuk').append('<option value='+ thn +">"+thn+'</option>');
  }

}

  $(document).ready(function () {
   tabnsiswa('frminputsiswa');
   document.getElementById('filesToUpload').addEventListener('change', fileSelect, false);
   setTahunmasuk();
  //  $('#tahun_masuk')
  //              .attr('type', 'text')
  //              .datepicker({
  //                  // Consistent format with the HTML5 picker
  //                  dateFormat: 'yy'
  //              })
  });

</script>


{% endblock %}
<!-- "{{ url_for('static', filename='img/favicon.ico') }}" -->
